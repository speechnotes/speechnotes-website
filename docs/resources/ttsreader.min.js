function TTSReader(a,b,c){function d(a){if(!a){if(!b)return;a=m(b)}a.length<1&&(a=v),A=a,z=0,e()}function e(){y=!0,n(),h(),j()}function f(){y=!1,n(),speechSynthesis.cancel(),i()}function g(){y?f():d()}function h(){D=window.setInterval(function(){window.speechSynthesis.speaking&&Date.now()-C>=1e4&&(window.speechSynthesis.pause(),window.speechSynthesis.resume(),C=Date.now())},2e3)}function i(){window.clearInterval(D)}function j(){var a=A.substring(z),b=k(a.slice(0,200));E.text=a.slice(0,b),B=E.text.length;for(var c=' .,"/<>()?;:',d="\n";(c.indexOf(E.text[0])!=-1||d==E.text.substring(0,2))&&E.text.length>0;)E.text=E.text.slice(1);a=a.slice(b),E.text.length>0?speechSynthesis.speak(E):a.length>0?(z+=B,z<A.length&&j()):f()}function k(a){var b=a.length+1,c=-1;return c=a.indexOf("\n"),c>-1&&c<b&&(b=c+1),c=a.indexOf(". "),c>-1&&c<b&&(b=c+2),c=a.indexOf("! "),c>-1&&c<b&&(b=c+2),c=a.indexOf("? "),c>-1&&c<b&&(b=c+2),c=a.indexOf(": "),c>-1&&c<b&&(b=c+2),c=a.indexOf(".\n"),c>-1&&c<b&&(b=c+2),c=a.indexOf("!\n"),c>-1&&c<b&&(b=c+2),c=a.indexOf("?\n"),c>-1&&c<b&&(b=c+2),c=a.indexOf(":\n"),c>-1&&c<b&&(b=c+2),c=a.indexOf(".["),c>-1&&c<b&&(b=c+2),c=a.indexOf("!["),c>-1&&c<b&&(b=c+2),c=a.indexOf("?["),c>-1&&c<b&&(b=c+2),c=a.indexOf(":["),c>-1&&c<b&&(b=c+2),b<=a.length?b:(c=a.indexOf(", "),c>-1&&c<b&&(b=c+2),c=a.indexOf("("),c>-1&&c<b&&(b=c+1),c=a.indexOf(")"),c>-1&&c<b&&(b=c+1),c=a.indexOf("["),c>-1&&c<b&&(b=c+1),c=a.indexOf("]"),c>-1&&c<b&&(b=c+1),b<=a.length?b:a.length<=200?a.length:(c=a.lastIndexOf(" "),c>-1&&c<b&&(b=c+1),b<=a.length?b:b=a.length))}function l(a){return void 0==a||null==a?a:"[object Array]"===Object.prototype.toString.call(a)?a.sort(function(a,b){var c=a[1].toUpperCase(),d=b[1].toUpperCase();return c<d?-1:c>d?1:0}):void 0}function m(a){var b="";switch(a.tagName){case"TEXTAREA":case"INPUT":b=a.selectionStart<a.value.length?a.value.substring(a.selectionStart):a.value;break;default:b=a.innerText}return b}function n(){y?s.style.color="red":s.style.color="gray"}function o(a){for(var b=[],c=0;c<a.length;c++){var d=["",""],e=a[c];d[0]=e.name,a.filter(function(a){return a.lang.split("-")[0]==e.lang.split("-")[0]}).length>1?d[1]=q(e.lang)+", "+p(e.name):d[1]=q(e.lang),0==d[1].length&&(d[1]=e.name);var f=e.name.toLowerCase(),g="";f.includes("google")&&(g=" **"),d[1]+=g,b[c]=d}b=l(b);/*for(var c=0;c<b.length;c++)document.getElementById("select_language").options[c+1]=new Option(b[c][1],b[c][0]);*/return b}function p(a){var b=a;return a=a.toLowerCase(),a.includes("google")&&(b=a.includes("female")?"Female":a.includes("male")?"Male":"G"),b}function q(a){a=a.replace("_","-");for(var b=[["en","English, US"],["en-US","English, US"],["id-ID","Bahasa, Indonesia"],["ms-MY","Bahasa, Melayu"],["bg-BG","Bulgarian"],["cs-CZ","Czech"],["da-DK","Danish, Denmark"],["de-DE","Deutsch"],["nl-NL","Dutch, Netherlands"],["nl-BE","Dutch, Belgium"],["en-AU","English, Australia"],["en-CA","English, Canada"],["en-IN","English, India"],["en-IE","English, Ireland"],["en-NZ","English, New Zealand"],["en-ZA","English, S. Africa"],["en-GB","English, UK"],["en-US","English, US"],["es-AR","español, Argentina"],["es-BO","español, Bolivia"],["es-CL","español, Chile"],["es-CO","español, Colombia"],["es-CR","español, Costa Rica"],["es-EC","español, Ecuador"],["es-SV","español, El Salvador"],["es-ES","español, España"],["es-US","español, Estados Unidos"],["es-GT","español, Guatemala"],["es-HN","español, Honduras"],["es-MX","español, México"],["es-NI","español, Nicaragua"],["es-PA","español, Panamá"],["es-PY","español, Paraguay"],["es-PE","español, Perú"],["es-PR","español, Puerto Rico"],["es-DO","español, R. Dominicana"],["es-UY","español, Uruguay"],["es-VE","español, Venezuela"],["fr-FR","français"],["fr-CA","français, Canada"],["hi-IN","Hindi"],["is-IS","Icelandic"],["zu-ZA","IsiZulu"],["it-IT","italiano"],["it-CH","italiano, Svizzera"],["ko-KR","Korean"],["hu-HU","Magyar"],["nb-NO","Norwegian"],["pl-PL","Polski"],["pt-BR","Português, Brasil"],["pt-PT","Português, Portugal"],["ro-RO","română"],["ru-RU","Pусский"],["sr-RS","Serbian"],["sk-SK","Slovak"],["fi-FI","Suomi"],["sv-SE","Svenska"],["th-TH","Thai"],["tr-TR","Turkish"],["el-GR","Ελληνικά"],["zh-CN","普通话 (中国大陆)"],["zh-HK","普通话 (香港)"],["zh-TW","中文 (台灣)"],["cmn-Hans-CN","普通话 (中国大陆)"],["cmn-Hans-HK","普通话 (香港)"],["cmn-Hant-TW","中文 (台灣)"],["yue-Hant-HK","粵語 (香港)"],["ja-JP","日本語"],["he-IL","עברית"],["ar-DZ","العربية, Algeria"],["ar-EG","العربية, Egypt"],["ar-IQ","العربية, Iraq"],["ar-JO","العربية, Jordan"],["ar-KW","العربية, Kuwait"],["ar-LB","العربية, Lebanon"],["ar-MA","العربية, Morocco"],["ar-QA","العربية, Qatar"],["ar-SA","العربية, Saudi Arabia"],["ar-AE","العربية, UAE"]],c=0;c<b.length;c++)if(b[c][0]==a)return b[c][1];for(var c=0;c<b.length;c++)if(b[c][0].split("-")[0]==a.split("-")[0])return b[c][1].split(",")[0];return a}var r,s,t={onready:function(){},onfinished:function(){},onstarted:function(){}};const u="position: absolute;bottom: 0;right: 0;height: 50px;width: 50px;color: gray;font-size:45px;    text-align: center;\n    line-height: 46px;\n    padding: 0;cursor: pointer",v="Hi, nice to meet you. Use me to proof-read your writing. So, go ahead. Write some text, and position the caret where you want me to start.";var w=null,x=null,y=!1,z=0,A="",B=0,C=0,D=null,E=new SpeechSynthesisUtterance("hello world");E.volume=1,E.rate=.9,E.pitch=1,E.lang="en-GB",r=a||t,this.init=function(){"speechSynthesis"in window&&(w=window.speechSynthesis.getVoices(),x=o(w),void 0!==window.speechSynthesis.onvoiceschanged&&(window.speechSynthesis.onvoiceschanged=function(){w=window.speechSynthesis.getVoices(),x=o(w)}),c=c||document.body,s=document.createElement("div"),s.setAttribute("id","ttsreaderBtn"),s.style=u,s.innerHTML='<i class="fa fa-volume-up" aria-hidden="true"></i>',c.appendChild(s),s.addEventListener("click",g))},this.setOptions=function(a){},this.speak=d,this.playSpeech=e,this.pauseSpeech=f,this.togglePlay=g,E.onstart=function(a){C=Date.now()},E.onend=function(a){y?(z+=B,z<A.length?j():f()):z>=A.length&&(z=0)},E.onerror=function(a){speechSynthesis.cancel(),y&&j()},E.onboundary=function(a){}}